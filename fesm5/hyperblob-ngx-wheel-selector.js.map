{"version":3,"file":"hyperblob-ngx-wheel-selector.js","sources":["ng://@hyperblob/ngx-wheel-selector/src/app/wheel-selector/wheel-selector/wheel-selector.component.ts","ng://@hyperblob/ngx-wheel-selector/src/app/wheel-selector/wheel-selector.module.ts","ng://@hyperblob/ngx-wheel-selector/hyperblob-ngx-wheel-selector.ts"],"sourcesContent":["import {\n  OnInit, AfterViewInit, OnDestroy, Inject, Component,\n  Input, Output, EventEmitter, ElementRef, ViewChild, ViewChildren\n} from '@angular/core'\n\nimport { SelectorModel } from './wheel-selector.models'\n\nexport { SelectorModel as PickerDataModel }\n\n@Component({\n  selector: 'ngx-wheel-selector',\n  templateUrl: './wheel-selector.component.html',\n  styleUrls: ['./wheel-selector.component.scss']\n})\nexport class WheelSelectorComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChildren('pickerGroupLayer')\n  pickerGroupLayer;\n  @ViewChild('pickerHandleLayer')\n  pickerHandleLayer;\n\n  @Input() data: SelectorModel[] = [];\n  @Output() change: EventEmitter<any> = new EventEmitter<any>();\n\n  currentIndexList: number[];\n  lastCurrentIndexList: number[];\n  groupsRectList: any[];\n  touchOrMouse = {\n    isTouchable: 'ontouchstart' in window,\n    isMouseDown: false\n  };\n  draggingInfo = {\n    isDragging: false,\n    groupIndex: null,\n    startPageY: null\n  };\n  itemPerDegree = 23;\n  safeDoTimeoutId: any = null;\n\n  constructor(@Inject(ElementRef) elementRef: ElementRef) {\n    // console.log('picker dom', elementRef.nativeElement)\n  }\n\n  ngOnInit() {\n    this.currentIndexList = this.getInitialCurrentIndexList();\n    this.lastCurrentIndexList = [].concat(this.currentIndexList);\n\n    this.groupsRectList = new Array(this.data.length);\n\n    this.eventsRegister();\n    window.addEventListener('resize', this.safeGetRectsBindEvents.bind(this));\n  }\n\n  ngAfterViewInit() {\n    this.getGroupsRectList();\n  }\n\n  ngOnDestroy() {\n    window.removeEventListener('resize', this.safeGetRectsBindEvents.bind(this));\n  }\n\n  setGroupData(gIndex, groupData) {\n    if (!this.currentIndexList) {\n      this.currentIndexList = this.getInitialCurrentIndexList();\n    }\n    this.data[gIndex] = groupData;\n    const iCI = groupData.currentIndex;\n    let movedIndex = 0;\n    if (typeof iCI === 'number' && iCI >= 0 && groupData.list && groupData.list.length && iCI <= groupData.list.length - 1) {\n      movedIndex = Math.round(iCI);\n    }\n    this.currentIndexList[gIndex] = movedIndex;\n    this.lastCurrentIndexList = [].concat(this.currentIndexList);\n  }\n\n  getInitialCurrentIndexList() {\n    return this.data.map((item, index) => {\n      const iCI = item.currentIndex;\n      if (typeof iCI === 'number' && iCI >= 0 && item.list && item.list.length && iCI <= item.list.length - 1) {\n        return Math.round(iCI);\n      }\n      return 0;\n    });\n  }\n\n  safeGetRectsBindEvents() {\n    if (this.safeDoTimeoutId) {\n      clearTimeout(this.safeDoTimeoutId);\n    }\n    this.safeDoTimeoutId = setTimeout(() => {\n      this.getGroupsRectList();\n    }, 200);\n  }\n\n  getGroupsRectList() {\n    if (this.pickerGroupLayer) {\n      this.pickerGroupLayer.toArray().forEach((item, index) => {\n        this.groupsRectList[index] = item.nativeElement.getBoundingClientRect();\n      });\n    }\n  }\n\n  eventsRegister() {\n    const handleEventLayer = this.pickerHandleLayer.nativeElement;\n    if (handleEventLayer) {\n      this.addEventsForElement(handleEventLayer);\n    }\n  }\n\n  addEventsForElement(el) {\n    const _ = this.touchOrMouse.isTouchable;\n    const eventHandlerList = [\n      {name: _ ? 'touchstart' : 'mousedown', handler: this.handleStart},\n      {name: _ ? 'touchmove' : 'mousemove', handler: this.handleMove},\n      {name: _ ? 'touchend' : 'mouseup', handler: this.handleEnd},\n      {name: _ ? 'touchcancel' : 'mouseleave', handler: this.handleCancel}\n    ];\n    if (!_) {\n      eventHandlerList.push({\n        name: 'wheel',\n        handler: this.handleWheel\n      });\n    }\n    eventHandlerList.forEach((item, index) => {\n      el.removeEventListener(item.name, item.handler, false);\n      el.addEventListener(item.name, item.handler.bind(this), false);\n    });\n  }\n\n  triggerMiddleLayerGroupClick(gIndex) {\n    const data = this.data;\n    if (typeof gIndex === 'number' && typeof data[gIndex].onClick === 'function') {\n      data[gIndex].onClick(gIndex, this.currentIndexList[gIndex]);\n    }\n  }\n\n  triggerAboveLayerClick(ev, gIndex) {\n    const movedIndex = this.currentIndexList[gIndex] + 1;\n    this.currentIndexList[gIndex] = movedIndex;\n    this.correctionCurrentIndex(ev, gIndex);\n  }\n\n  triggerMiddleLayerClick(ev, gIndex) {\n    this.triggerMiddleLayerGroupClick(gIndex);\n  }\n\n  triggerBelowLayerClick(ev, gIndex) {\n    const movedIndex = this.currentIndexList[gIndex] - 1;\n    this.currentIndexList[gIndex] = movedIndex;\n    this.correctionCurrentIndex(ev, gIndex);\n  }\n\n  getTouchInfo(ev) {\n    return this.touchOrMouse.isTouchable ? ev.changedTouches[0] || ev.touches[0] : ev;\n  }\n\n  getGroupIndexBelongsEvent(ev) {\n    const touchInfo = this.getTouchInfo(ev);\n    for (let i = 0; i < this.groupsRectList.length; i++) {\n      const item = this.groupsRectList[i];\n      if (item.left < touchInfo.pageX && touchInfo.pageX < item.right) {\n        return i;\n      }\n    }\n    return null;\n  }\n\n  handleEventClick(ev) {\n    const gIndex = this.getGroupIndexBelongsEvent(ev);\n    switch (ev.target.dataset.type) {\n      case 'top':\n        this.triggerAboveLayerClick(ev, gIndex);\n        break;\n      case 'middle':\n        this.triggerMiddleLayerClick(ev, gIndex);\n        break;\n      case 'bottom':\n        this.triggerBelowLayerClick(ev, gIndex);\n        break;\n      default:\n    }\n  }\n\n  handleStart(ev) {\n    if (ev.cancelable) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    const touchInfo = this.getTouchInfo(ev);\n    this.draggingInfo.startPageY = touchInfo.pageY;\n    if (!this.touchOrMouse.isTouchable) {\n      this.touchOrMouse.isMouseDown = true;\n    }\n  }\n\n  handleMove(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    if (this.touchOrMouse.isTouchable || this.touchOrMouse.isMouseDown) {\n      this.draggingInfo.isDragging = true;\n      this.setCurrentIndexOnMove(ev);\n    }\n  }\n\n  handleEnd(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    if (!this.draggingInfo.isDragging) {\n      this.handleEventClick(ev);\n    }\n    this.draggingInfo.isDragging = false;\n    this.touchOrMouse.isMouseDown = false;\n    this.correctionAfterDragging(ev);\n  }\n\n  handleCancel(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    if (this.touchOrMouse.isTouchable || this.touchOrMouse.isMouseDown) {\n      this.correctionAfterDragging(ev);\n      this.touchOrMouse.isMouseDown = false;\n      this.draggingInfo.isDragging = false;\n    }\n  }\n\n  handleWheel(ev) {\n\n    this.setCurrentIndexOnWheel(ev);\n    this.correctionAfterDragging(ev);\n\n  }\n\n  setCurrentIndexOnWheel(ev) {\n\n    const gIndex = this.getGroupIndexBelongsEvent(ev);\n    if (typeof gIndex === 'number' && (this.data[gIndex].divider || !this.data[gIndex].list)) {\n      return;\n    }\n\n    const movedIndex = this.currentIndexList[gIndex] + (ev.deltaY / 53);\n    this.currentIndexList[gIndex] = movedIndex;\n\n    this.correctionCurrentIndex(ev, gIndex);\n\n  }\n\n  setCurrentIndexOnMove(ev) {\n    const touchInfo = this.getTouchInfo(ev);\n    if (this.draggingInfo.groupIndex === null) {\n      this.draggingInfo.groupIndex = this.getGroupIndexBelongsEvent(ev);\n    }\n    const gIndex = this.draggingInfo.groupIndex;\n    if (typeof gIndex === 'number' && (this.data[gIndex].divider || !this.data[gIndex].list)) {\n      return;\n    }\n    const moveCount = (this.draggingInfo.startPageY - touchInfo.pageY) / 32;\n    const movedIndex = this.currentIndexList[gIndex] + moveCount;\n    this.currentIndexList[gIndex] = movedIndex;\n    this.draggingInfo.startPageY = touchInfo.pageY;\n  }\n\n  correctionAfterDragging(ev) {\n    const gIndex = this.draggingInfo.groupIndex;\n    this.correctionCurrentIndex(ev, gIndex);\n    this.draggingInfo.groupIndex = null;\n    this.draggingInfo.startPageY = null;\n  }\n\n  correctionCurrentIndex(ev, gIndex) {\n    setTimeout(() => {\n      if (typeof gIndex === 'number' && this.data[gIndex].divider !== true && this.data[gIndex].list.length > 0) {\n        const unsafeGroupIndex = this.currentIndexList[gIndex];\n        let movedIndex = unsafeGroupIndex;\n        if (unsafeGroupIndex > this.data[gIndex].list.length - 1) {\n          movedIndex = this.data[gIndex].list.length - 1;\n        } else if (unsafeGroupIndex < 0) {\n          movedIndex = 0;\n        }\n        movedIndex = Math.round(movedIndex);\n        this.currentIndexList[gIndex] = movedIndex;\n        if (movedIndex !== this.lastCurrentIndexList[gIndex]) {\n          this.change.emit({gIndex, iIndex: movedIndex});\n        }\n        this.lastCurrentIndexList = [].concat(this.currentIndexList);\n      }\n    }, 100);\n  }\n\n  isCurrentItem(gIndex, iIndex) {\n    return this.currentIndexList[gIndex] === iIndex\n  }\n\n  getCurrentIndexList() {\n    return this.currentIndexList\n  }\n\n  getGroupClass(gIndex) {\n    const group = this.data[gIndex]\n    const defaultWeightClass = 'weight-' + (group.weight || 1)\n    const groupClass = [defaultWeightClass]\n    if (group.className) {\n      groupClass.push(group.className)\n    }\n    return groupClass\n  }\n\n  getItemClass(gIndex, iIndex, isDivider = false) {\n    const group = this.data[gIndex]\n    const itemClass = []\n    if (!isDivider && this.isCurrentItem(gIndex, iIndex)) {\n      itemClass.push('smooth-item-selected')\n    }\n    if (group.textAlign) {\n      itemClass.push('text-' + group.textAlign)\n    }\n    return itemClass\n  }\n\n  getItemStyle(gIndex, iIndex) {\n    const gapCount = this.currentIndexList[gIndex] - iIndex\n    if (Math.abs(gapCount) < (90 / this.itemPerDegree)) {\n      const rotateStyle = {\n        transform: 'rotateX(' + gapCount * this.itemPerDegree + 'deg) translate3d(0, 0, 5.625em)',\n        opacity: (1 - Math.abs(gapCount) / (90 / this.itemPerDegree)).toString()\n      }\n      if (!this.draggingInfo.isDragging) {\n        rotateStyle['transition'] = 'transform 150ms ease-out'\n      }\n      return rotateStyle\n    }\n    if (gapCount > 0) {\n      return {transform: 'rotateX(90deg) translate3d(0, 0, 5.625em)'}\n    } else {\n      return {transform: 'rotateX(-90deg) translate3d(0, 0, 5.625em)'}\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { WheelSelectorComponent, PickerDataModel } from './wheel-selector/wheel-selector.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [WheelSelectorComponent],\n  exports: [WheelSelectorComponent]\n})\nexport class WheelSelectorModule { }\n\nexport { WheelSelectorComponent, PickerDataModel }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["tslib_1.__decorate","tslib_1.__param"],"mappings":"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"}